<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BI –ê–ª–∞—Ä–º–∞ –∑–∞ –ê–Ω–æ–º–∞–ª–∏–∏</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#56A4B1">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>üö® BI –ê–ª–∞—Ä–º–∞</h1>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-text" id="statusText">–í—Å–∏—á–∫–æ –µ –Ω–æ—Ä–º–∞–ª–Ω–æ</span>
                <div class="status-dot normal" id="statusDot"></div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bottom-nav">
        <button class="nav-btn active" onclick="showScreen('dashboard')">
            <span class="nav-icon">üìä</span>
            <span class="nav-text">Dashboard</span>
        </button>
        <button class="nav-btn" onclick="showScreen('alerts')">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-text">–ê–ª–∞—Ä–º–∏</span>
        </button>
        <button class="nav-btn" onclick="showScreen('details')">
            <span class="nav-icon">üìà</span>
            <span class="nav-text">–î–µ—Ç–∞–π–ª–∏</span>
        </button>
    </nav>

    <!-- Dashboard Screen -->
    <div class="screen active" id="dashboard">
        <div class="container">
            <section class="quick-stats">
                <div class="stat-card">
                    <h3>–ê–∫—Ç–∏–≤–Ω–∏ –ê–ª–∞—Ä–º–∏</h3>
                    <span class="stat-number" id="activeAlarms">2</span>
                </div>
                <div class="stat-card">
                    <h3>–ü—Ä–æ–≤–µ—Ä–µ–Ω–∏ –î–Ω–µ—Å</h3>
                    <span class="stat-number">47</span>
                </div>
            </section>

            <section class="recent-alerts">
                <h2>–ü–æ—Å–ª–µ–¥–Ω–∏ –ò–∑–≤–µ—Å—Ç–∏—è</h2>
                <div class="alert-list" id="alertList">
                    <div class="alert-item critical">
                        <div class="alert-icon">üî¥</div>
                        <div class="alert-content">
                            <h4>–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏</h4>
                            <p>–°–ø–∞–¥ —Å 18% —Å–ø—Ä—è–º–æ –≤—á–µ—Ä–∞</p>
                            <span class="alert-time">–ü—Ä–µ–¥–∏ 2 —á–∞—Å–∞</span>
                        </div>
                        <button class="alert-action" onclick="showAnomalyDetails('sales')">
                            <span>‚Üí</span>
                        </button>
                    </div>
                    
                    <div class="alert-item warning">
                        <div class="alert-icon">üü°</div>
                        <div class="alert-content">
                            <h4>–°—Ä–µ–¥–Ω–∞ –°—Ç–æ–π–Ω–æ—Å—Ç –ö–æ—à–Ω–∏—Ü–∞</h4>
                            <p>–ü–æ–∫–∞—á–≤–∞–Ω–µ —Å 12% —Å–ø—Ä—è–º–æ –º–∏–Ω–∞–ª–∞—Ç–∞ —Å–µ–¥–º–∏—Ü–∞</p>
                            <span class="alert-time">–ü—Ä–µ–¥–∏ 5 —á–∞—Å–∞</span>
                        </div>
                        <button class="alert-action" onclick="showAnomalyDetails('basket')">
                            <span>‚Üí</span>
                        </button>
                    </div>
                    
                    <div class="alert-item normal">
                        <div class="alert-icon">üü¢</div>
                        <div class="alert-content">
                            <h4>–ë—Ä–æ–π –ö–ª–∏–µ–Ω—Ç–∏</h4>
                            <p>–í –Ω–æ—Ä–º–∞ - –±–µ–∑ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è</p>
                            <span class="alert-time">–ü—Ä–µ–¥–∏ 1 —á–∞—Å</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Alerts Setup Screen -->
    <div class="screen" id="alerts">
        <div class="container">
            <section class="form-section">
                <h2>–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ù–æ–≤–∞ –ê–ª–∞—Ä–º–∞</h2>
                
                <div class="form-step active" id="step1">
                    <h3>–°—Ç—ä–ø–∫–∞ 1: –ò–∑–±–æ—Ä –Ω–∞ –ú–µ—Ç—Ä–∏–∫–∞</h3>
                    <div class="input-group">
                        <label for="metricName">–ò–º–µ –Ω–∞ –ú–µ—Ç—Ä–∏–∫–∞</label>
                        <input type="text" id="metricName" placeholder="–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏, –ú–∞—Ä–∂, –ö–ª–∏–µ–Ω—Ç–∏...">
                    </div>
                    <div class="metric-suggestions">
                        <button class="suggestion-btn" onclick="selectMetric('–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏')">–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏</button>
                        <button class="suggestion-btn" onclick="selectMetric('–°—Ä–µ–¥–Ω–∞ –°—Ç–æ–π–Ω–æ—Å—Ç –ö–æ—à–Ω–∏—Ü–∞')">–°—Ä–µ–¥–Ω–∞ –°—Ç–æ–π–Ω–æ—Å—Ç –ö–æ—à–Ω–∏—Ü–∞</button>
                        <button class="suggestion-btn" onclick="selectMetric('–ú–∞—Ä–∂ %')">–ú–∞—Ä–∂ %</button>
                        <button class="suggestion-btn" onclick="selectMetric('–ë—Ä–æ–π –ö–ª–∏–µ–Ω—Ç–∏')">–ë—Ä–æ–π –ö–ª–∏–µ–Ω—Ç–∏</button>
                    </div>
                    <button class="next-btn" onclick="nextStep(2)">–ù–∞–ø—Ä–µ–¥</button>
                </div>

                <div class="form-step" id="step2">
                    <h3>–°—Ç—ä–ø–∫–∞ 2: –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –ü—Ä–∞–≥</h3>
                    <div class="input-group">
                        <label for="thresholdType">–¢–∏–ø –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ</label>
                        <select id="thresholdType">
                            <option value="percentage">–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ</option>
                            <option value="absolute">–ê–±—Å–æ–ª—é—Ç–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="thresholdValue">–°—Ç–æ–π–Ω–æ—Å—Ç</label>
                        <input type="number" id="thresholdValue" placeholder="15">
                    </div>
                    <div class="input-group">
                        <label for="comparisonPeriod">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–ø—Ä—è–º–æ</label>
                        <select id="comparisonPeriod">
                            <option value="yesterday">–í—á–µ—Ä–∞</option>
                            <option value="lastWeek">–ú–∏–Ω–∞–ª–∞—Ç–∞ —Å–µ–¥–º–∏—Ü–∞</option>
                            <option value="lastMonth">–ú–∏–Ω–∞–ª–∏—è –º–µ—Å–µ—Ü</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="back-btn" onclick="prevStep(1)">–ù–∞–∑–∞–¥</button>
                        <button class="next-btn" onclick="nextStep(3)">–ù–∞–ø—Ä–µ–¥</button>
                    </div>
                </div>

                <div class="form-step" id="step3">
                    <h3>–°—Ç—ä–ø–∫–∞ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h3>
                    <div class="input-group">
                        <label for="apiKey">API –ö–ª—é—á –∏–ª–∏ –ò–∑—Ç–æ—á–Ω–∏–∫</label>
                        <input type="text" id="apiKey" placeholder="demo_key_12345">
                    </div>
                    <div class="input-group">
                        <label for="notificationMethod">–ú–µ—Ç–æ–¥ –∑–∞ –ò–∑–≤–µ—Å—Ç—è–≤–∞–Ω–µ</label>
                        <select id="notificationMethod">
                            <option value="push">Push –ò–∑–≤–µ—Å—Ç–∏–µ</option>
                            <option value="email">Email</option>
                            <option value="both">–ò –¥–≤–µ—Ç–µ</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="back-btn" onclick="prevStep(2)">–ù–∞–∑–∞–¥</button>
                        <button class="create-btn" onclick="createAlert()">–°—ä–∑–¥–∞–π –ê–ª–∞—Ä–º–∞</button>
                    </div>
                </div>
            </section>

            <section class="existing-alerts">
                <h2>–°—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ –ê–ª–∞—Ä–º–∏</h2>
                <div class="alert-list" id="existingAlerts">
                    <div class="alert-config">
                        <div class="config-content">
                            <h4>–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏</h4>
                            <p>–°–ø–∞–¥ > 15% —Å–ø—Ä—è–º–æ –≤—á–µ—Ä–∞</p>
                            <span class="config-status active">–ê–∫—Ç–∏–≤–Ω–∞</span>
                        </div>
                        <button class="toggle-btn" onclick="toggleAlert(this)">‚è∏Ô∏è</button>
                    </div>
                    
                    <div class="alert-config">
                        <div class="config-content">
                            <h4>–°—Ä–µ–¥–Ω–∞ –°—Ç–æ–π–Ω–æ—Å—Ç –ö–æ—à–Ω–∏—Ü–∞</h4>
                            <p>–ü—Ä–æ–º—è–Ω–∞ > 10% —Å–ø—Ä—è–º–æ –º–∏–Ω–∞–ª–∞—Ç–∞ —Å–µ–¥–º–∏—Ü–∞</p>
                            <span class="config-status active">–ê–∫—Ç–∏–≤–Ω–∞</span>
                        </div>
                        <button class="toggle-btn" onclick="toggleAlert(this)">‚è∏Ô∏è</button>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Anomaly Details Screen -->
    <div class="screen" id="details">
        <div class="container">
            <section class="anomaly-header">
                <h2 id="anomalyTitle">–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏ - –ê–Ω–æ–º–∞–ª–∏—è</h2>
                <div class="anomaly-severity critical">
                    <span class="severity-icon">üî¥</span>
                    <span class="severity-text">–ö—Ä–∏—Ç–∏—á–Ω–æ</span>
                </div>
            </section>

            <section class="anomaly-summary">
                <div class="summary-card">
                    <h3>–î–µ—Ç–∞–π–ª–∏ –Ω–∞ –ù–∞—Ä—É—à–µ–Ω–∏–µ—Ç–æ</h3>
                    <div class="summary-content">
                        <p><strong>–ú–µ—Ç—Ä–∏–∫–∞:</strong> <span id="detailMetric">–û–±—â–∏ –ü—Ä–æ–¥–∞–∂–±–∏</span></p>
                        <p><strong>–ü—Ä–∞–≥:</strong> <span id="detailThreshold">–°–ø–∞–¥ —Å –ø–æ–≤–µ—á–µ –æ—Ç 15% —Å–ø—Ä—è–º–æ –≤—á–µ—Ä–∞</span></p>
                        <p><strong>–ê–∫—Ç—É–∞–ª–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç:</strong> <span id="detailValue" class="critical-value">-18%</span></p>
                        <p><strong>–í—Ä–µ–º–µ –Ω–∞ –∑–∞—Å–∏—á–∞–Ω–µ:</strong> <span id="detailTime">2025-10-02 10:30</span></p>
                    </div>
                </div>
            </section>

            <section class="chart-section">
                <h3>–î–≤–∏–∂–µ–Ω–∏–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 7 –¥–Ω–∏</h3>
                <div class="chart-container">
                    <canvas id="anomalyChart" width="350" height="200"></canvas>
                </div>
            </section>

            <section class="notes-section">
                <h3>–ó–∞–±–µ–ª–µ–∂–∫–∏ –∏ –•–∏–ø–æ—Ç–µ–∑–∏</h3>
                <div class="notes-container">
                    <textarea id="notesField" placeholder="–î–æ–±–∞–≤–µ—Ç–µ –≤–∞—à–∞—Ç–∞ —Ö–∏–ø–æ—Ç–µ–∑–∞ –∏–ª–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä –∑–∞ —Ç–∞–∑–∏ –∞–Ω–æ–º–∞–ª–∏—è..."></textarea>
                    <button class="save-notes-btn" onclick="saveNotes()">üíæ –ó–∞–ø–∞–∑–∏ –ó–∞–±–µ–ª–µ–∂–∫–∞</button>
                </div>
                <div class="saved-notes" id="savedNotes">
                    <div class="note-item">
                        <p>"–í—ä–∑–º–æ–∂–Ω–æ –≤–ª–∏—è–Ω–∏–µ –æ—Ç –ø—Ä–æ–º–æ—Ü–∏–æ–Ω–∞–ª–Ω–∞—Ç–∞ –∫–∞–º–ø–∞–Ω–∏—è, –∫–æ—è—Ç–æ –ø—Ä–∏–∫–ª—é—á–∏ –≤—á–µ—Ä–∞"</p>
                        <span class="note-time">–ü—Ä–µ–¥–∏ 1 —á–∞—Å</span>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
